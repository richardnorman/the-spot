(this["webpackJsonpthe-spot"]=this["webpackJsonpthe-spot"]||[]).push([[0],{107:function(e,t,a){e.exports=a(125)},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(9),r=a.n(c),i=(a(112),a(113),a(15)),l=a(11),s=a(19),u=a(173),d=a(158),m=a(161),p=a(164),h=a(163),g=a(165),b=a(168),f=a(176),E=a(166),v=(a(114),a(18)),O=function(e){return{type:"CHANGE_CURRENT_USER",payload:e}},y=Object(d.a)({root:{maxWidth:"90%"},media:{height:200}}),j=function(e){var t=e.isUpdating,a=void 0!==t&&t,c=e.id,r=void 0===c?"":c,l=e.name,d=void 0===l?"":l,O=e.description,j=void 0===O?"":O,S=e.image,N=void 0===S?"":S,w=e.coords,C=void 0===w?"":w,k=e.dateCreated,x=void 0===k?"":k,L=(Object(v.c)((function(e){return e.modifySpotList.spotList})),Object(v.c)((function(e){return e.changeCurrentUser.currentUserEmail}))),R=(Object(v.b)(),y()),T=Object(n.useState)(d),U=Object(s.a)(T,2),I=U[0],P=U[1],_=Object(n.useState)(j),A=Object(s.a)(_,2),D=A[0],J=A[1],B=Object(n.useState)(C),G=Object(s.a)(B,2),H=G[0],W=G[1],V=Object(n.useState)(!1),z=Object(s.a)(V,2),F=z[0],M=z[1],$=Object(n.useState)(N),q=Object(s.a)($,2),K=q[0],Q=q[1];function X(e){W("".concat(e.coords.latitude,", ").concat(e.coords.longitude))}function Y(e){alert("Location can not be found, try connecting to a network."+e)}return o.a.createElement("div",{className:"page"},o.a.createElement("div",{className:"editable-card"},o.a.createElement(m.a,{className:R.root},o.a.createElement(h.a,{className:R.media,image:""===K?"https://bhmlib.org/wp-content/themes/cosimo-pro/images/no-image-box.png":K}),o.a.createElement(p.a,null,o.a.createElement(g.a,{onClick:function(e){Q(prompt("Enter image URL:")||"")},className:"add-image-button",variant:"contained"},a?"Edit Image":"Add image"),o.a.createElement(u.a,{className:"inputs",id:"standard-basic",label:"Name",onChange:function(e){return P(e.target.value)},value:I}),o.a.createElement(u.a,{className:"inputs",id:"standard-basic",label:"Description",onChange:function(e){return J(e.target.value)},value:D}),a?null:o.a.createElement(n.Fragment,null,o.a.createElement(E.a,{className:"use-location-switch",control:o.a.createElement(f.a,{name:"checkedB",checked:F,onChange:function(e){F?(W(""),M(!1)):(M(!0),navigator.geolocation.getCurrentPosition(X,Y))},color:"primary"}),label:"Use current location"}),F?null:o.a.createElement(u.a,{className:"inputs",id:"standard-basic",label:"Location",onChange:function(e){return W(e.target.value)}}))))),o.a.createElement(i.b,{to:"/the-spot/",style:{textDecoration:"none"}},o.a.createElement(b.a,{disabled:""===I||""===H,onClick:function(){a?fetch("https://the-spot01.herokuapp.com/update-spot/".concat(L),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,title:I,description:D,image:""===K?"https://bhmlib.org/wp-content/themes/cosimo-pro/images/no-image-box.png":K,coords:H,dateCreated:x})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})):fetch("https://the-spot01.herokuapp.com/add-spot/".concat(L),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:I,description:D,image:""===K?"https://bhmlib.org/wp-content/themes/cosimo-pro/images/no-image-box.png":K,coords:H})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},color:"primary",className:"done-button",variant:"extended"},"Done")),a?o.a.createElement(i.b,{to:"/the-spot/",style:{textDecoration:"none"}},o.a.createElement(g.a,{className:"remove-spot-button",onClick:function(){fetch("https://the-spot01.herokuapp.com/remove-spot/".concat(L),{method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},color:"secondary"},"Remove Spot")):null)},S=a(46),N=a.n(S),w=a(62),C=a(48),k=(a(86),function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],r=a[1],d=Object(n.useState)(""),h=Object(s.a)(d,2),g=h[0],f=h[1],E=Object(l.f)(),y=Object(v.b)();return o.a.createElement("div",{className:"action-container"},o.a.createElement(m.a,{className:"action-card"},o.a.createElement(p.a,null,o.a.createElement("h1",null,"Sign In"),o.a.createElement(C.b,{initialValues:{email:"",password:""},onSubmit:function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",alert(JSON.stringify(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement(C.a,null,o.a.createElement(u.a,{className:"inputs action-text-field",id:"standard-basic",label:"Email",type:"email",onChange:function(e){return r(e.target.value)}}),o.a.createElement(u.a,{className:"inputs action-text-field",id:"standard-basic",label:"Password",type:"password",onChange:function(e){return f(e.target.value)}}),o.a.createElement("div",{className:"card-buttons-container"},o.a.createElement("div",null,o.a.createElement(b.a,{onClick:function(e){fetch("https://the-spot01.herokuapp.com/sign-in",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:g})}).then((function(e){e.status<400?(y(O(c)),E.push("/the-spot")):alert("Please provide a valid/verified email and password.")})).catch((function(e){return console.log(e)}))},color:"primary",className:"main-action-button",variant:"extended"},"Sign In")),o.a.createElement("div",null,o.a.createElement(i.b,{to:"/the-spot/register",style:{textDecoration:"none",color:"black"}},o.a.createElement("p",null,"Register")))))))))}),x=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],r=a[1],d=Object(n.useState)(""),h=Object(s.a)(d,2),g=h[0],f=h[1],E=Object(n.useState)(""),v=Object(s.a)(E,2),O=v[0],y=v[1],j=Object(n.useState)(!1),S=Object(s.a)(j,2),k=S[0],x=S[1];Object(l.f)();return o.a.createElement("div",{className:"action-container"},k?o.a.createElement("h2",null,"Please check your email and click on the link to verify your account."):o.a.createElement(m.a,{className:"action-card"},o.a.createElement(p.a,null,o.a.createElement("h1",null,"Register"),o.a.createElement(C.b,{initialValues:{email:"",password:""},onSubmit:function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",alert(JSON.stringify(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o.a.createElement(C.a,null,o.a.createElement(u.a,{className:"inputs action-text-field",id:"standard-basic",label:"Name",type:"name",onChange:function(e){return r(e.target.value)}}),o.a.createElement(u.a,{className:"inputs action-text-field",id:"standard-basic",label:"Email",type:"email",onChange:function(e){return f(e.target.value)}}),o.a.createElement(u.a,{className:"inputs action-text-field",id:"standard-basic",label:"Password",type:"password",onChange:function(e){return y(e.target.value)}}),o.a.createElement("div",{className:"card-buttons-container"},o.a.createElement("div",null,o.a.createElement(b.a,{onClick:function(e){fetch("https://the-spot01.herokuapp.com/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,email:g,password:O})}).then((function(e){e.status<400?x(!0):alert("Please provide a valid email that is not in use.")})).catch((function(e){return alert("Could not register user")}))},color:"primary",className:"main-action-button",variant:"extended"},"Register")),o.a.createElement("div",null,o.a.createElement(i.b,{to:"/the-spot/sign-in",style:{textDecoration:"none",color:"black"}},o.a.createElement("p",null,"Sign In")))))))))},L=(a(121),function(){var e=new URLSearchParams(window.location.search),t=e.get("id")||"",a=e.get("name")||"",n=e.get("description")||"",c=e.get("image")||"",r=e.get("coords")||"",i=e.get("dateCreated")||"";return o.a.createElement("div",null,o.a.createElement(j,{id:t,name:a,description:n,image:c,coords:r,dateCreated:i,isUpdating:!0}))}),R=a(169),T=a(170),U=a(126),I=(a(122),Object(d.a)({root:{maxWidth:"100%"},media:{height:150}})),P=function(e){var t=e.id,a=void 0===t?"":t,n=e.title,c=void 0===n?"":n,r=e.description,i=void 0===r?"":r,s=e.image,u=void 0===s?"":s,d=e.coords,b=e.dateCreated,f=void 0===b?"":b,E=I(),v=Object(l.f)();return o.a.createElement("div",{onClick:function(){v.push("/the-spot/update-spot?id=".concat(a,"&name=").concat(c,"&description=").concat(i,"&image=").concat(u,"&coords=").concat(d,"&dateCreated=").concat(f))},className:"card-container"},o.a.createElement(m.a,{className:E.root},o.a.createElement(R.a,null,o.a.createElement(h.a,{className:E.media,image:u}),o.a.createElement(p.a,null,o.a.createElement(U.a,{gutterBottom:!0,variant:"h5",component:"h2"},c),o.a.createElement(U.a,{variant:"body2",color:"textSecondary",component:"p"},i))),o.a.createElement(T.a,null,o.a.createElement(g.a,{target:"_blank",href:"https://www.google.com/maps/place/".concat(d),size:"small",color:"primary"},"View Location"))))},_=a(91),A=a.n(_),D=(a(123),Object(d.a)((function(e){return{extendedIcon:{marginRight:e.spacing(1)}}}))),J=function(e){var t=D();return o.a.createElement(b.a,{className:"floating-add-spot",variant:"extended"},o.a.createElement(A.a,{className:t.extendedIcon}),"Add a Spot")},B=a(47),G=a(171),H=a(172),W=a(167),V=a(177),z=a(14),F=a(92),M=a.n(F),$=a(93),q=a.n($),K=a(175),Q=Object(d.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(B.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(B.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(z.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(z.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(B.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"20ch","&:focus":{width:"20ch"}})}})),X=function(){var e=Q(),t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],r=a[1],l=Object(v.b)();return o.a.createElement(n.Fragment,null,o.a.createElement(G.a,{style:{background:"white",color:"black"},position:"sticky"},o.a.createElement(H.a,null,o.a.createElement(W.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer",onClick:function(){return r(!c)}},o.a.createElement(M.a,null)),o.a.createElement(U.a,{className:e.title,variant:"h6",noWrap:!0},"My Spots"),o.a.createElement("div",{className:e.search},o.a.createElement("div",{className:e.searchIcon},o.a.createElement(q.a,null)),o.a.createElement(V.a,{placeholder:"Search your spots",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){l({type:"CHANGE_SEARCH",payload:e.target.value})}})))),o.a.createElement(K.a,{anchor:"left",open:c,onClose:function(){return r(!1)}},o.a.createElement(i.b,{onClick:function(){l(O(""))},to:"/the-spot/sign-in",style:{textDecoration:"none",color:"black"}},o.a.createElement("h2",{style:{paddingLeft:"15px",paddingRight:"60px",cursor:"pointer"}},"Sign out"))))},Y=function(e){var t=Object(v.c)((function(e){return e.modifySpotList.spotList})),a=Object(v.c)((function(e){return e.changeSearch.searchText})),c=Object(v.c)((function(e){return e.changeCurrentUser.currentUserEmail})),r=Object(l.f)(),s=Object(v.b)();Object(n.useEffect)((function(){c||(console.log("No current user detected, redirecting to sign in"),r&&r.push("/the-spot/sign-in")),c&&fetch("https://the-spot01.herokuapp.com/get-spots/".concat(c)).then((function(e){return e.json()})).then((function(e){s(function(e){return{type:"SET_SPOT_LIST",payload:e}}(e))})).catch((function(e){return console.log(e)}))}));var u=function(e){return 0===e.list.length?o.a.createElement("p",{style:{textAlign:"center",marginTop:"15%",fontSize:"1.5rem"}},"No spots found, ",o.a.createElement(i.b,{to:"/the-spot/add-spot",style:{color:"black"}},o.a.createElement("strong",null,"add one now!"))):e.list.length>0?e.list.map((function(e){return o.a.createElement(P,{id:e.id,title:e.title,description:e.description,image:e.image,coords:e.coords,dateCreated:e.dateCreated})})):null};return o.a.createElement("div",null,o.a.createElement(X,null),o.a.createElement("p",{className:"recent-spots"},"Recently added"),o.a.createElement("div",{id:"spots-grid",className:0===t.length?"":"spots-grid"},""===a||void 0===a?o.a.createElement(u,{list:t}):o.a.createElement(u,{list:t.filter((function(e){return e.title.toLowerCase().includes(a.toLowerCase())||e.description.toLowerCase().includes(a.toLowerCase())}))})),o.a.createElement(i.b,{to:"/the-spot/add-spot"},o.a.createElement(J,null)))};function Z(){return o.a.createElement(i.a,null,o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:"/the-spot"},o.a.createElement(Y,null)),o.a.createElement(l.a,{path:"/the-spot/add-spot"},o.a.createElement(j,null)),o.a.createElement(l.a,{path:"/the-spot/update-spot"},o.a.createElement(L,null)),o.a.createElement(l.a,{path:"/the-spot/sign-in"},o.a.createElement(k,null)),o.a.createElement(l.a,{path:"/the-spot/register"},o.a.createElement(x,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=a(41),te=a(96),ae=a(22),ne=a(94),oe=function(e,t){var a,n=0,o=Object(ne.a)(e);try{for(o.s();!(a=o.n()).done;){if(a.value.title===t.title)break;n++}}catch(c){o.e(c)}finally{o.f()}return n},ce={spotList:[]},re={searchText:""},ie={currentUserEmail:""},le=a(95),se=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return void console.log(t)}}(),ue=Object(ee.combineReducers)({modifySpotList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SPOT":return Object(ae.a)(Object(ae.a)({},e),{},{spotList:[t.payload].concat(Object(te.a)(e.spotList))});case"UPDATE_SPOT":var a=e.spotList,n=oe(e.spotList,t.payload);return a[n]=t.payload,Object(ae.a)(Object(ae.a)({},e),{},{spotList:a});case"REMOVE_SPOT":var o=e.spotList,c=oe(e.spotList,t.payload);return o.splice(c,1),Object(ae.a)(Object(ae.a)({},e),{},{spotList:o});case"SET_SPOT_LIST":return Object(ae.a)(Object(ae.a)({},e),{},{spotList:t.payload});default:return e}},changeSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SEARCH":return Object(ae.a)(Object(ae.a)({},e),{},{searchText:t.payload});default:return e}},changeCurrentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_CURRENT_USER":return Object(ae.a)(Object(ae.a)({},e),{},{currentUserEmail:t.payload});default:return e}}}),de=Object(ee.createStore)(ue,se,Object(le.composeWithDevTools)());de.subscribe((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){console.log(a)}}(de.getState())})),r.a.render(o.a.createElement(v.a,{store:de},o.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},86:function(e,t,a){}},[[107,1,2]]]);
//# sourceMappingURL=main.784828be.chunk.js.map